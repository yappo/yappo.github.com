<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Style-Type" content="text/css; charset=utf-8" />
<meta http-equiv="Content-Script-Type" content="text/javascript; charset=utf-8" />
<meta name="generator" content="emacs" />
<meta name="version" content="0.1" />
<meta name="author" content="Yappo" />
<title>はかどる話2</title>
<script type="text/javascript" src="./s6.js"></script>
<script type="text/javascript">
// <![CDATA[

var bodyStyle = {
    width: '100%',
    height: '100%',
    padding: '0',
    margin: '0',
    overflow: 'hidden',
    backgroundColor: 'gray'
};

s6.css('html', bodyStyle);
s6.css('body', bodyStyle);

var pr;
s6.attach(s6, 'ready', function ready() {
    var html = document.documentElement;
    var height = html.offsetHeight;
    var width = html.offsetWidth;
    var top = 0;
    var left = 0;

    if (height / width < 0.75) {
        var originalWidth = width;
        width = height / 0.75;
        left = (originalWidth - width) / 2 + 'px';
    }
    else {
        var originalHeight = height;
        height = width * 0.75;
        top = (originalHeight - height) / 2 + 'px';
    }

    var result;
    if (result = document.cookie.match(/page=(\d+)/)) {
        var startIndex = +result[1];
    }

    pr = new s6.Presentation({ element: document.body, width: width, height: height, startIndex: startIndex });
    pr.style.left = left;
    pr.style.top = top;
    pr.start();

    var indexNoOutline = false;

    pr.funcPages.index.attachPage('click', function(i, element, wrapper) {
        indexNoOutline = true;
        setTimeout(function() {
            indexNoOutline =false
        }, 1000);
        wrapper.style.background = '';
        pr.go(i);
    });

    pr.funcPages.index.attachPage('mouseover', function(i, element, wrapper) {
        if (indexNoOutline) return;
        wrapper.className += ' selected';
    });
    
    pr.funcPages.index.attachPage('mouseout', function(i, element, wrapper) {
        wrapper.className = 'wrapper';
    });

    try {
        var isIframe = !(window.parent == window);
    } catch(e) {
        isIframe = true;
    }

    s6.attach(document,   'keypress Right', 'step', 0, pr);
    s6.attach(document,   'keypress Left',  'prev', 0, pr);
    s6.attach(document,   'keypress Up',    function() { pr.go('index') });
    s6.attach(document,   'keypress Down',  'back', 0, pr);

    s6.attach(document,   'keypress l', 'step', 0, pr);
    s6.attach(document,   'keypress h',  'prev', 0, pr);
    s6.attach(document,   'keypress k',    function() { pr.go('index') });
    s6.attach(document,   'keypress j',  'back', 0, pr);

});

// Test
var timer = 0;
setInterval(function() {
    document.cookie = 'page=' + pr.index;
    document.title = timer++;
}, 1000);
// ]]>
</script>

</head>
<body>

 <!-- ===================================================== -->

 <div>
  <h3>操作方法</h3>
  <ul>
   <li>l キー: 次のページへ</li>
   <li>h キー: 前のページへ</li>

   <li>j キー: 目次ページへ</li>
   <li>k キー: 目次ページから戻る</li>
   <li>目次ページでは j k キーで一覧を移動し、クリックで選択します</li>
  </ul>
  <script type="text/javascript"> s6.page({ styles: { ul: { fontSize: '0.75em', marginTop: '2%' } } }) </script>
 </div>

 <!-- ===================================================== -->

 <h1>はかどる話2</h1>

 <address>Yappo: yappo あっと shibuya.pl<br /> kanagawa . pm</address>

 <script type="text/javascript">
    s6.page({
        wrap: 2,
        styles: { 'h1/span': { fontWeight: 'bold' } }
    })
 </script>

 <!-- ===================================================== -->

 <div>
  <p>あらすじ</p>
  <script type="text/javascript"> s6.page({ styleBase: 'takahashi' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>はかどる話1については、昨日のとある人の社内プレゼンの資料をお読み下さい。<br />今日は捗った話の体験談を話します。</p>
  <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>ITS の捗った話</p>
  <script type="text/javascript"> s6.page({ styleBase: 'takahashi' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
   <h3>before</h3>
   <ul>
     <li>Catalyst based</li>
     <li>mod_perl で動いてた気がする</li>
     <li>Moose とか入れたくねー</li>
     <li>mod_perl とか開発環境作りたくねー</li>
   </ul>
   <script type="text/javascript"> s6.page({ styleBase: '', styles: { 'ul/li': { fontSize: "0.8em" } } }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>なんか直したいけどメンテやってる人っぽい人にやらせようって思った。</p>
  <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>状況は一月くらい前に変わって、神に酔って全部作り直された。</p>
  <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
   <h3>after</h3>
   <ul>
     <li>Amon2 based になった</li>
     <li>cpanm --installdeps . だけで動くようになった</li>
   </ul>
   <script type="text/javascript"> s6.page({ styleBase: '', styles: { 'ul/li': { fontSize: "0.8em" } } }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>開発環境作るのアホみたいに楽になったから、思いつきベースで俺の考えた最強の ITS にするか。</p>
  <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
   <h3>捗った所</h3>
   <ul>
     <li>癖のない WAF で作ってるので、コードの見通しが数倍良くなった</li>
     <li>開発者が当社比3倍くらいに増えた</li>
     <li>業務が捗る拡張がすごい増えた</li>
     <li>Trac を捨てて乗り換えてくるプロジェクトが出て来た</li>
     <li>開発サイクルが短くなったお陰で、要望増えた</li>
   </ul>
   <script type="text/javascript"> s6.page({ styleBase: '', styles: { 'ul/li': { fontSize: "0.8em" } } }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>この一ヶ月くらいで変わった所</p>
  <script type="text/javascript"> s6.page({ styleBase: 'takahashi' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
   <h3>トピックにタグ付ける</h3>
   <p><img src="img/its-tag.png"></p>
   <script type="text/javascript"> s6.page({ styleBase: '', styles: { 'ul/li': { fontSize: "0.8em" } } }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
   <p>
     トピックタイトルから正規表現でタグを抜き出して、表示を別にする。<br />
     ついでにタイトル検索付けて、タグで like 検索してタグがついたのだけリストするとか便利。
   </p>
  <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
   <h3>記法の追加</h3>
   <p><img src="img/its-format.png"></p>
   <script type="text/javascript"> s6.page({ styleBase: '', styles: { 'ul/li': { fontSize: "0.8em" } } }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
   <p>
     折角なので記法を追加、 String::Filter 大活躍
   </p>
  <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
   <h3>こう表示される</h3>
   <p><img src="img/its-format-show.png"></p>
   <script type="text/javascript"> s6.page({ styleBase: '', styles: { 'ul/li': { fontSize: "0.8em" } } }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
   <h3>記法</h3>
   <ul>
     <li>pre, super-pre 記法</li>
     <li>TODO 記法</li>
     <li>社内 gyazo url を張るとインライン表示 記法</li>
     <li>社内 nopaste url を張るとインライン表示 記法</li>
     <li>他のトピックへのリンク 記法 [projectname:1111] でリンク</li>
   </ul>
   <script type="text/javascript"> s6.page({ styleBase: '', styles: { 'ul/li': { fontSize: "0.8em" } } }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
   <h3>変更が合ったら ikachan で通知もついた</h3>
   <p><img src="img/its-project.png"></p>
   <script type="text/javascript"> s6.page({ styleBase: '', styles: { 'ul/li': { fontSize: "0.8em" } } }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
   <p>トピックタイトルに irc channel っぽいのを入れると、そのトピックの更新だけチャンネルに通知するって事も出来る</p>
  <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>喜びの声多数</p>
  <script type="text/javascript"> s6.page({ styleBase: 'takahashi' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
   <h3>続々と寄せられる喜びの声</h3>
   <ul>
     <li>TODO便利れす(^q^</li>
     <li>画像インラインよかったれす</li>
     <li>タグ検索いいね</li>
     <li>まいるすとーんてなに？</li>
     <li>300k くらいある nopaste はったらブラクラになったwwwww</li>
   </ul>
   <script type="text/javascript"> s6.page({ styleBase: '', styles: { 'ul/li': { fontSize: "0.8em" } } }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>10 k 越えてたら ITS proxy で Status: 941 を返すようにした</p>
  <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
   <h3>あとは ikachan も褒められてた</h3>
   <p><img src="img/its-ikachan.png"></p>
   <script type="text/javascript"> s6.page({ styleBase: '', styles: { 'ul/li': { fontSize: "0.8em" } } }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>僕がこれ全部やったわけじゃないからね</p>
  <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>社内に依存した記法を plugin 化してしまえば、一般公開できんじゃね？</p>
  <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>まとめると、社内ツールは小さく作って開発環境の構築の手間を省いたり、見通しの良いコードにすると非開発者も捗る</p>
  <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>ITS の捗った話 おわり</p>
  <script type="text/javascript"> s6.page({ styleBase: 'takahashi' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>IRC の捗った話</p>
  <script type="text/javascript"> s6.page({ styleBase: 'takahashi' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>irc log web viewer を誰かが作ったのに俺のせいにされた。 tiarra とか mobirc してるから俺捗らないから興味ない。</p>
  <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>IRC bot</p>
  <script type="text/javascript"> s6.page({ styleBase: 'takahashi' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>Twitter の URL が張られてもクリックするのめんどいので、それっぽい url 張られたら内容を取るスクリプト書いた。</p>
  <pre>
    m{https?://twitter.com(?:/#!)?/([^/]+)/status(?:es)?/(\d+)}
    my($text) = $res->content =~ m{<meta> content="([^"]+)" name="description" />};
  </pre>"
  <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>


 <!-- ===================================================== -->

 <div>
  <p>なんか ITS の URL 張られてもクリック面倒だからタイトルだけみたら捗るよね。ってことで機能追加。</p>
  <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>面倒だから #数字 で、 irc チャンネルに該当する ITS の URL と、そのタイトルを流すようにした</p>
  <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>[git commit hash 適当な長さ]で、コミットメッセージとかの情報も流れるようにした</p>
  <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>「よしやるぞ！」って発言したら、過去ろぐ10行くらいさかのぼってログを ITS に貼付けてチケット切る機能つけた。</p>
  <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>まったく捗らなかった</p>
  <script type="text/javascript"> s6.page({ styleBase: 'takahashi' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>えらいひとが「ip address 張られたらヤビツと CloudForecast の URL だす bot 欲しい」て言ってたので作った</p>
  <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>「cf:192.168.0.1,192.168.0.2」とか書いたら CF の複数のホストのグラフ出すような URL も吐くようになた</p>
  <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>しまいにはヤビツの中の人がハックして、存在してるホストの時だけ反応するようにしてた</p>
  <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>俺は特に捗らなかった</p>
  <script type="text/javascript"> s6.page({ styleBase: 'takahashi' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>もっとトピックあるけど後で</p>
  <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>IRC の捗った話 おわり</p>
  <script type="text/javascript"> s6.page({ styleBase: 'takahashi' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>グラフ を捗らせたい話</p>
  <script type="text/javascript"> s6.page({ styleBase: 'takahashi' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>社内共有で気軽にグラフ書く為のツールが無かったので、昨夜いらっとして書いてみた。</p>
   <p ><a href="http://clothforest.soozy.org/" target="_blank">詳しくは別ページで</a></p>
  <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>本当はこれを今日の話に使用とおもったら、 kazeburo 先生が本気出し始めたので kazeburo ware としてリリースされるまでお待ち下さい。</p>
  <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>グラフ を捗らせたい話 おわり</p>
  <script type="text/javascript"> s6.page({ styleBase: 'takahashi' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>IRC bot を捗らせたい話</p>
  <script type="text/javascript"> s6.page({ styleBase: 'takahashi' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>さっきの bot とか他のプロジェクトの人とかにも捗らせようとすると一人で無理があるので、スケールする捗る IRC bot プロダクト作った。</p>
  <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>というか ClothForest の話が没になったので、慌てて今日書いた。</p>
  <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
   <h3>Kuragepo 特徴</h3>
   <ul>
     <li>サーバ - クライアント モデル</li>
     <li>クライアントを作りが簡単、依存少ない</li>
     <li>gearmand 動かしてるけど、 kuragepo -S ircserver ってするだけで ok</li>
     <li>クライアントは use App::Kuragepo::Worker; して register と run を呼ぶだけ</li>
     <li>クライアントをサーバに繋げる処理が複雑だけど、利用者は気にしないで ok</li>
   </ul>
   <script type="text/javascript"> s6.page({ styleBase: '', styles: { 'ul/li': { fontSize: "0.7em" } } }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
   <p>コード適当に見ながら解説</p>
   <p ><a href="https://github.com/yappo/p5-App-Kuragepo/blob/master/bin/kuragepo" target="_blank">App::Kuragepo</a> - <a href="https://github.com/yappo/p5-App-Kuragepo-Worker/blob/master/example/echo.pl" target="_blank">App::Kuragepo::Worker</a></p>
   <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>ついさっき社内 irc に放流してるので利用実績はあります！</p>
  <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>IRC bot を捗らせたい話 おわり</p>
  <script type="text/javascript"> s6.page({ styleBase: 'takahashi' }); </script>
 </div>

 <!-- ===================================================== -->

 <div>
  <p>という事で、 hirose31 ware がだいぶ捗ってたので、頑張ってそれに近づけてるという話でした。いじょうおわり。</p>
  <script type="text/javascript"> s6.page({ styleBase: '' }); </script>
 </div>

 <!-- ===================================================== -->

</body>
</html>
